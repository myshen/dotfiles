# Docs:
# https://wiki.archlinux.org/index.php/Tmux
# bind-key -n attaches binding without prefix
#
# Based on:
# http://mutelight.org/articles/practical-tmux
# https://github.com/olalonde/dotfiles/blob/master/tmux.conf

source-file ~/.dotfiles/tmux/tmux.reset.conf

# Rebind prefix
set-option -g prefix C-Space
unbind-key C-b
# nested multiplexers should have a different prefix, e.g. C-a

bind-key ! break-pane -d
bind-key C-c new-window

# Cycle next pane
bind-key C-Tab select-pane -t :.+
# toggle panes
bind-key C-Space last-window

bind-key / list-commands
# http://stackoverflow.com/questions/10543684/how-can-i-clear-scrollback-buffer-in-tmux
bind-key -n C-S-k clear-history

# Turn off Esc wait time.
set-option -sg escape-time 0

# Number windows starting from 1
set -g base-index 1
set-window-option -g pane-base-index 1

set-option -g history-limit 100000

set-window-option -g alternate-screen on

set-option -g message-limit 50

# mouse
set-option -g mode-mouse on
set-window-option -g mouse-select-window on
set-window-option -g mouse-select-pane on
set-window-option -g mouse-resize-pane on

# be quiet
set-option -g visual-bell off # let the terminal decide what to do
set-option -g set-titles on
bind-key x kill-pane

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity on

# Aggressively resize the window if two clients are using
set-window-option -g aggressive-resize on

# Useability
set-option -g mode-keys vi
set-option -g status-keys vi

# vi-like copy mode
set-window-option -g mode-keys vi
bind -t vi-copy v begin-selection
bind -t vi-copy y copy-selection
bind -t vi-copy Escape cancel
unbind p
bind p paste-buffer

## reload config
bind R source-file ~/.tmux.conf \; display-message "reloaded config"

bind-key S set synchronize-panes

# clear window name
# use with stty sane
bind T rename-window "sane"

# If tmux sees more than trigger# C0 control chars (backspace, linefeed,
# carriage return) in 1ms, defer updates to pane for interval# ms.
set-window-option -g c0-change-trigger 1
set-window-option -g c0-change-interval 1000

source-file ~/.dotfiles/tmux/conf.d/navigation.conf
source-file ~/.dotfiles/tmux/conf.d/vim-tmux-navigator.conf
source-file ~/.dotfiles/tmux/conf.d/theme.conf

# must be last
source-file ~/.dotfiles/tmux/conf.d/tpm.conf
